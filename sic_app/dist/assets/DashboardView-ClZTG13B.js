import{j as e}from"./utils-BFDESJkx.js";import{a as _,f as u,C as n,c as g,b as x,B as j,d as p,e as y}from"./index-CqREN1s9.js";import{b as I,c as L}from"./hooks-DgF8CINs.js";import{b as D}from"./vendor-DoupW2GI.js";import{P as A}from"./plus-itcZ0HEe.js";import{D as $}from"./dollar-sign-Bp_OTlgP.js";import{C as f}from"./circle-alert-DkZFsuz1.js";/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P=_("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);function v({title:r,value:a,subtitle:l,trend:t,format:c="number",currency:m="USD",icon:i,color:s="blue",className:h,onClick:N,loading:k=!1,change:o}){const w=d=>{if(typeof d=="string")return d;switch(c){case"currency":return u(d,m);case"percentage":return`${d}%`;default:return d.toLocaleString()}},b={blue:"text-primary-600 dark:text-primary-400",green:"text-success-600 dark:text-success-400",yellow:"text-warning-600 dark:text-warning-400",red:"text-error-600 dark:text-error-400",gray:"text-gray-600 dark:text-gray-400"};if(k)return e.jsx(n,{className:g("transition-all duration-200",h),children:e.jsx(x,{className:"p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"loading-shimmer h-4 w-20 mb-2","data-testid":"loading-shimmer"}),e.jsx("div",{className:"loading-shimmer h-8 w-24"})]}),i&&e.jsx("div",{className:"flex-shrink-0 ml-3",children:e.jsx("div",{className:"loading-shimmer h-6 w-6 rounded"})})]})})});const C=()=>{if(!i)return null;if(typeof i=="function"){const d=i;return e.jsx(d,{className:"h-6 w-6"})}return i};return e.jsx(n,{className:g("transition-all duration-200",N&&"cursor-pointer hover:shadow-md",h),onClick:N,children:e.jsx(x,{className:"p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 truncate",children:r}),e.jsxs("div",{className:"mt-1 flex items-baseline",children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:w(a)}),(t||o!==void 0)&&e.jsx("div",{className:"ml-2 flex items-center",children:e.jsx("span",{className:g("text-sm font-medium",t?.direction==="up"||o!==void 0&&o>0?"text-success-600 dark:text-success-400":"text-red-600 dark:text-red-400"),children:o!==void 0?`${o>0?"+":""}${o}%`:t?`${t.direction==="up"?"â†—":"â†˜"} ${Math.abs(t.value)}%`:null})})]}),l&&e.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:l}),t?.period&&e.jsxs("p",{className:"mt-1 text-xs text-gray-400 dark:text-gray-500",children:["vs ",t.period]})]}),i&&e.jsx("div",{className:g("flex-shrink-0 ml-3",b[s]),children:C()})]})})})}function S({value:r,trend:a,currency:l="USD",className:t,onClick:c}){return e.jsx(v,{title:"Total Revenue",value:r,format:"currency",currency:l,color:"green",trend:a,className:t,onClick:c,icon:e.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})})})}function T({value:r,trend:a,subtitle:l,className:t,onClick:c}){return e.jsx(v,{title:"Total Invoices",value:r,subtitle:l,color:"blue",trend:a,className:t,onClick:c,icon:e.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})})}function B({value:r,amount:a,currency:l="USD",className:t,onClick:c}){return e.jsx(v,{title:"Overdue Invoices",value:r,subtitle:a?u(a,l):void 0,color:"red",className:t,onClick:c,icon:e.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.464 0L4.34 16.5c-.77.833.192 2.5 1.732 2.5z"})})})}function F(){const r=D(),{data:a,isLoading:l}=I(),{data:t,isLoading:c}=L({limit:5,offset:0}),m=t?.data||[];if(l)return e.jsx(U,{});const i=a?.totals||{all:0,draft:0,pending:0,paid:0,overdue:0,cancelled:0};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Dashboard"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Overview of your invoice management"})]}),e.jsxs(j,{onClick:()=>r("/invoices/new"),className:"w-full sm:w-auto",children:[e.jsx(A,{className:"h-4 w-4 mr-2"}),"New Invoice"]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(T,{value:i.all,subtitle:"Total invoices",onClick:()=>r("/invoices")}),e.jsx(S,{value:a?.expected_payments_next_30d||0,onClick:()=>r("/invoices?status=pending")}),e.jsx(B,{value:i.overdue,onClick:()=>r("/invoices?status=overdue")}),e.jsx(v,{title:"Avg. Days to Pay",value:a?.avg_days_to_pay?`${a.avg_days_to_pay.toFixed(1)} days`:"N/A",color:"gray",icon:e.jsx(P,{className:"h-6 w-6"})})]}),e.jsxs(n,{children:[e.jsx(p,{children:e.jsx(y,{children:"Invoice Status Breakdown"})}),e.jsx(x,{children:e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-4",children:[{label:"Draft",value:i.draft,color:"text-gray-600"},{label:"Pending",value:i.pending,color:"text-warning-600"},{label:"Paid",value:i.paid,color:"text-success-600"},{label:"Overdue",value:i.overdue,color:"text-error-600"},{label:"Cancelled",value:i.cancelled,color:"text-gray-500"}].map(s=>e.jsxs("div",{className:"text-center cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-lg p-3 transition-colors",onClick:()=>r(`/invoices?status=${s.label.toLowerCase()}`),children:[e.jsx("div",{className:`text-2xl font-bold ${s.color} dark:opacity-90`,children:s.value}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 capitalize",children:s.label})]},s.label))})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(n,{children:[e.jsxs(p,{className:"flex flex-row items-center justify-between",children:[e.jsx(y,{children:"Recent Invoices"}),e.jsx(j,{variant:"ghost",size:"sm",onClick:()=>r("/invoices"),children:"View All"})]}),e.jsx(x,{children:c?e.jsx("div",{className:"space-y-3",children:[...Array(3)].map((s,h)=>e.jsx("div",{className:"loading-shimmer h-16 rounded-lg"},h))}):m.length>0?e.jsx("div",{className:"space-y-3",children:m.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-3 hover:bg-gray-50 dark:hover:bg-gray-800 rounded-lg cursor-pointer transition-colors",onClick:()=>r(`/invoices/${s.id}`),children:[e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:["Invoice #",s.id]}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Due: ",new Date(s.due_date).toLocaleDateString()]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:u(s.amount_cents,s.currency)}),e.jsx("div",{className:`text-xs px-2 py-1 rounded-full inline-block mt-1 ${s.status==="paid"?"bg-success-100 text-success-700 dark:bg-success-900/30 dark:text-success-300":s.status==="overdue"?"bg-error-100 text-error-700 dark:bg-error-900/30 dark:text-error-300":"bg-warning-100 text-warning-700 dark:bg-warning-900/30 dark:text-warning-300"}`,children:s.status.charAt(0).toUpperCase()+s.status.slice(1)})]})]},s.id))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-gray-400 mb-2",children:e.jsx($,{className:"h-12 w-12 mx-auto mb-3"})}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No invoices yet"}),e.jsx(j,{variant:"ghost",size:"sm",onClick:()=>r("/invoices/new"),className:"mt-2",children:"Create your first invoice"})]})})]}),e.jsxs(n,{children:[e.jsx(p,{children:e.jsxs(y,{className:"flex items-center gap-2",children:[e.jsx(f,{className:"h-5 w-5 text-warning-600"}),"Top Late Clients"]})}),e.jsx(x,{children:a?.top_late_clients&&a.top_late_clients.length>0?e.jsx("div",{className:"space-y-3",children:a.top_late_clients.slice(0,5).map(s=>e.jsxs("div",{className:"flex items-center justify-between p-3 hover:bg-gray-50 dark:hover:bg-gray-800 rounded-lg cursor-pointer transition-colors",onClick:()=>r(`/clients/${s.client_id}`),children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:s.client_name}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[s.overdue_count," overdue invoice",s.overdue_count!==1?"s":""]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-error-600 dark:text-error-400 font-medium",children:[s.avg_days_late.toFixed(0)," days late"]}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:u(s.total_overdue_amount_cents)})]})]},s.client_id))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-gray-400 mb-2",children:e.jsx(f,{className:"h-12 w-12 mx-auto mb-3"})}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No late clients"}),e.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500 mt-1",children:"All invoices are being paid on time! ðŸŽ‰"})]})})]})]})]})}function U(){return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"loading-shimmer h-8 w-32 mb-2"}),e.jsx("div",{className:"loading-shimmer h-4 w-48"})]}),e.jsx("div",{className:"loading-shimmer h-10 w-32"})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[...Array(4)].map((r,a)=>e.jsxs(n,{className:"p-4",children:[e.jsx("div",{className:"loading-shimmer h-4 w-20 mb-2"}),e.jsx("div",{className:"loading-shimmer h-8 w-16 mb-1"}),e.jsx("div",{className:"loading-shimmer h-3 w-24"})]},a))}),e.jsxs(n,{className:"p-4",children:[e.jsx("div",{className:"loading-shimmer h-6 w-40 mb-4"}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-5 gap-4",children:[...Array(5)].map((r,a)=>e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"loading-shimmer h-8 w-12 mx-auto mb-2"}),e.jsx("div",{className:"loading-shimmer h-4 w-16 mx-auto"})]},a))})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[...Array(2)].map((r,a)=>e.jsxs(n,{className:"p-4",children:[e.jsx("div",{className:"loading-shimmer h-6 w-32 mb-4"}),e.jsx("div",{className:"space-y-3",children:[...Array(3)].map((l,t)=>e.jsx("div",{className:"loading-shimmer h-16"},t))})]},a))})]})}export{F as DashboardView};
