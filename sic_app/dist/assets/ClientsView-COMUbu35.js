import{j as e}from"./utils-BFDESJkx.js";import{b as k,r as o}from"./vendor-DoupW2GI.js";import{a as C,C as y,b as p,B as n,d as b,e as _,U as N}from"./index-CqREN1s9.js";import{d as L}from"./hooks-DgF8CINs.js";import{P as u}from"./plus-itcZ0HEe.js";/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=C("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);function M(){const d=k(),{data:v,isLoading:f}=L({limit:100,offset:0}),[s,w]=o.useState("name"),[c,h]=o.useState("asc"),j=v?.data||[],l=o.useMemo(()=>[...j].sort((a,t)=>{let r,i;switch(s){case"name":r=a.name.toLowerCase(),i=t.name.toLowerCase();break;case"email":r=a.email.toLowerCase(),i=t.email.toLowerCase();break;case"created_at":r=new Date(a.created_at).getTime(),i=new Date(t.created_at).getTime();break;default:r=a.name.toLowerCase(),i=t.name.toLowerCase()}return r<i?c==="asc"?-1:1:r>i?c==="asc"?1:-1:0}),[j,s,c]),m=a=>{s===a?h(c==="asc"?"desc":"asc"):(w(a),h("asc"))},x=a=>s!==a?e.jsx(D,{className:"h-4 w-4"}):c==="asc"?"↑":"↓",g=a=>new Date(a).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"});return f?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{className:"loading-shimmer h-8 w-32"}),e.jsx("div",{className:"loading-shimmer h-10 w-32"})]}),e.jsx(y,{children:e.jsx(p,{className:"p-6",children:e.jsx("div",{className:"space-y-4",children:[...Array(5)].map((a,t)=>e.jsx("div",{className:"loading-shimmer h-16 rounded-lg"},t))})})})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Clients"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Manage your client relationships"})]}),e.jsxs(n,{className:"w-full sm:w-auto",onClick:()=>d("/clients/new"),children:[e.jsx(u,{className:"h-4 w-4 mr-2"}),"Add Client"]})]}),e.jsxs(y,{children:[e.jsx(b,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(_,{children:["All Clients (",l.length,")"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Sort by:"}),e.jsxs("div",{className:"flex gap-1",children:[e.jsxs(n,{variant:"ghost",size:"sm",onClick:()=>m("name"),className:`h-8 px-2 ${s==="name"?"bg-primary-100 dark:bg-primary-900/30":""}`,"data-testid":"sort-name",children:["Name ",x("name")]}),e.jsxs(n,{variant:"ghost",size:"sm",onClick:()=>m("email"),className:`h-8 px-2 ${s==="email"?"bg-primary-100 dark:bg-primary-900/30":""}`,"data-testid":"sort-email",children:["Email ",x("email")]}),e.jsxs(n,{variant:"ghost",size:"sm",onClick:()=>m("created_at"),className:`h-8 px-2 ${s==="created_at"?"bg-primary-100 dark:bg-primary-900/30":""}`,"data-testid":"sort-created",children:["Created ",x("created_at")]})]})]})]})}),e.jsx(p,{children:l.length>0?e.jsx("div",{className:"space-y-2",children:l.map(a=>e.jsxs("div",{className:"flex items-center justify-between p-4 hover:bg-gray-50 dark:hover:bg-gray-800 rounded-lg cursor-pointer transition-colors border border-transparent hover:border-gray-200 dark:hover:border-gray-700",onClick:()=>d(`/clients/${a.id}`),"data-testid":"client-card",children:[e.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[e.jsx("div",{className:"w-10 h-10 bg-primary-100 dark:bg-primary-900/30 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx(N,{className:"h-5 w-5 text-primary-600 dark:text-primary-400"})}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-medium text-gray-900 dark:text-gray-100 truncate","data-testid":"client-name",children:a.name}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 truncate","data-testid":"client-email",children:a.email}),a.contact_name&&e.jsxs("p",{className:"text-xs text-gray-400 dark:text-gray-500 truncate","data-testid":"contact-name",children:["Contact: ",a.contact_name]})]}),e.jsxs("div",{className:"hidden sm:flex items-center gap-6 text-sm text-gray-500 dark:text-gray-400",children:[a.contact_phone&&e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-medium","data-testid":"contact-phone",children:a.contact_phone}),e.jsx("div",{className:"text-xs",children:"Phone"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-medium",children:a.timezone||"UTC"}),e.jsx("div",{className:"text-xs",children:"Timezone"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-medium",children:g(a.created_at)}),e.jsx("div",{className:"text-xs",children:"Created"})]})]})]})})]}),e.jsx("div",{className:"sm:hidden text-right",children:e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:g(a.created_at)})})]},a.id))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-gray-400 mb-4",children:e.jsx(N,{className:"h-16 w-16 mx-auto"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2",children:"No clients yet"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:"Add your first client to start managing invoices."}),e.jsxs(n,{onClick:()=>d("/clients/new"),children:[e.jsx(u,{className:"h-4 w-4 mr-2"}),"Add Client"]})]})})]})]})}export{M as ClientsView};
