import{j as e}from"./utils-BFDESJkx.js";import{a as f,C as m,b as o,d as u,e as y,c as x,h as C,B as i,g,f as D}from"./index-CqREN1s9.js";import{S as v}from"./StatusBadge-BMt1r0ga.js";import{C as z}from"./circle-alert-DkZFsuz1.js";import{C as S}from"./circle-check-big-D1Wym9_W.js";import{e as _,f as I}from"./hooks-DgF8CINs.js";import{f as R,b as T}from"./vendor-DoupW2GI.js";import{A as k}from"./arrow-left-ByMrzti7.js";import{M}from"./mail-BFqoYxaV.js";/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=f("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j=f("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=f("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);function A({reminders:s,onSendNow:r,onEditReminder:l,onDeleteReminder:a,isLoading:c=!1,className:n}){const d=[...s].sort((t,N)=>new Date(t.send_at).getTime()-new Date(N.send_at).getTime());return d.length===0?e.jsx(m,{className:n,children:e.jsxs(o,{className:"p-8 text-center",children:[e.jsx(j,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2",children:"No reminders scheduled"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Schedule a reminder to automatically follow up on this invoice."})]})}):e.jsxs(m,{className:n,children:[e.jsx(u,{children:e.jsxs(y,{className:"flex items-center gap-2",children:[e.jsx(j,{className:"h-5 w-5"}),"Reminder Schedule"]})}),e.jsx(o,{className:"p-0",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute left-6 top-0 bottom-0 w-px bg-gray-200 dark:bg-gray-700"}),e.jsx("div",{className:"space-y-0",children:d.map(t=>e.jsx(E,{reminder:t,onSendNow:r,onEdit:l,onDelete:a,isLoading:c},t.id))})]})})]})}function E({reminder:s,onSendNow:r,onEdit:l,onDelete:a,isLoading:c}){const n=new Date(s.send_at),d=new Date,t=n<d,N=n.toDateString()===d.toDateString(),b=p=>{const h="h-4 w-4";switch(p){case"sent":return e.jsx(S,{className:x(h,"text-success-600 dark:text-success-400")});case"failed":return e.jsx(B,{className:x(h,"text-error-600 dark:text-error-400")});case"pending":return t?e.jsx(z,{className:x(h,"text-warning-600 dark:text-warning-400")}):e.jsx(j,{className:x(h,"text-gray-500 dark:text-gray-400")});default:return e.jsx(j,{className:x(h,"text-gray-500 dark:text-gray-400")})}},w=p=>{switch(p){case"sent":return"bg-success-600 border-success-200";case"failed":return"bg-error-600 border-error-200";case"pending":return t?"bg-warning-600 border-warning-200":"bg-gray-300 dark:bg-gray-600 border-gray-100 dark:border-gray-700";default:return"bg-gray-300 dark:bg-gray-600 border-gray-100 dark:border-gray-700"}};return e.jsxs("div",{className:"relative pl-14 pr-4 py-4 border-b border-gray-100 dark:border-gray-700 last:border-b-0",children:[e.jsx("div",{className:x("absolute left-4 w-4 h-4 rounded-full border-4","flex items-center justify-center",w(s.status)),children:e.jsx("div",{className:"w-1 h-1 bg-white rounded-full"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[b(s.status),e.jsx(v,{status:s.status,size:"sm"}),N&&s.status==="pending"&&e.jsx("span",{className:"text-xs font-medium text-warning-700 dark:text-warning-300 bg-warning-100 dark:bg-warning-900/30 px-2 py-0.5 rounded-full",children:"Due Today"})]}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:C(s.send_at)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[s.status==="pending"&&r&&e.jsxs(i,{variant:"ghost",size:"sm",onClick:()=>r(s.id),disabled:c,className:"text-xs",children:[e.jsx(V,{className:"h-3 w-3 mr-1"}),"Send Now"]}),l&&e.jsx(i,{variant:"ghost",size:"sm",onClick:()=>l(s),disabled:c,className:"text-xs",children:"Edit"}),a&&e.jsx(i,{variant:"ghost",size:"sm",onClick:()=>a(s.id),disabled:c,className:"text-xs text-error-600 dark:text-error-400 hover:text-error-700 dark:hover:text-error-300",children:"Delete"})]})]}),s.subject&&e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:"Subject:"})," ",e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:s.subject})]}),s.channel&&e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 dark:text-gray-400",children:[e.jsxs("span",{className:"capitalize",children:["via ",s.channel]}),s.channel==="email"&&e.jsxs("svg",{className:"h-3 w-3",fill:"currentColor",viewBox:"0 0 20 20",children:[e.jsx("path",{d:"M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"}),e.jsx("path",{d:"M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"})]}),s.channel==="sms"&&e.jsx("svg",{className:"h-3 w-3",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.767 2 11.434 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7zM7 9H5v2h2V9zm8 0h-2v2h2V9zM9 9h2v2H9V9z",clipRule:"evenodd"})})]})]})]})}function J(){const{id:s}=R(),r=T(),l=parseInt(s||"0"),{data:a,isLoading:c}=_(l),{data:n}=I({limit:10,offset:0}),d=(n?.data||[]).filter(t=>t.invoice_id===l);return c?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"loading-shimmer h-10 w-full"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsx(m,{children:e.jsx(o,{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"loading-shimmer h-6 w-32"}),e.jsx("div",{className:"loading-shimmer h-4 w-full"}),e.jsx("div",{className:"loading-shimmer h-4 w-3/4"})]})})})}),e.jsx("div",{children:e.jsx("div",{className:"loading-shimmer h-64 w-full"})})]})]}):a?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(i,{variant:"ghost",size:"sm",onClick:()=>r("/invoices"),className:"p-2",children:e.jsx(k,{className:"h-4 w-4"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:["Invoice #",a.id]}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:["Created ",g(a.created_at)]})]}),e.jsx(v,{status:a.status,size:"lg"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs(m,{children:[e.jsx(u,{children:e.jsx(y,{children:"Invoice Details"})}),e.jsx(o,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Amount"}),e.jsx("p",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:D(a.amount_cents,a.currency)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Due Date"}),e.jsx("p",{className:"text-lg text-gray-900 dark:text-gray-100",children:g(a.due_date)})]})]}),a.paid_at&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Paid Date"}),e.jsx("p",{className:"text-lg text-success-600 dark:text-success-400",children:g(a.paid_at)})]}),e.jsxs("div",{className:"flex gap-2 pt-4",children:[e.jsxs(i,{size:"sm",children:[e.jsx(M,{className:"h-4 w-4 mr-2"}),"Send Reminder"]}),e.jsx(i,{variant:"secondary",size:"sm",children:"Edit Invoice"})]})]})})]}),e.jsx(A,{reminders:d,onSendNow:t=>console.log("Send reminder",t),onEditReminder:t=>console.log("Edit reminder",t),onDeleteReminder:t=>console.log("Delete reminder",t)})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(m,{children:[e.jsx(u,{children:e.jsx(y,{children:"Client Information"})}),e.jsx(o,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Client ID"}),e.jsxs("p",{className:"text-gray-900 dark:text-gray-100",children:["#",a.client_id]})]}),e.jsx(i,{variant:"ghost",size:"sm",onClick:()=>r(`/clients/${a.client_id}`),className:"w-full",children:"View Client Details"})]})})]}),e.jsxs(m,{children:[e.jsx(u,{children:e.jsxs(y,{className:"flex items-center gap-2",children:[e.jsx(j,{className:"h-4 w-4"}),"Timeline"]})}),e.jsx(o,{children:e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Created"}),e.jsx("span",{className:"text-gray-900 dark:text-gray-100",children:g(a.created_at)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Status"}),e.jsx(v,{status:a.status,size:"sm"})]}),a.paid_at&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Paid"}),e.jsx("span",{className:"text-success-600 dark:text-success-400",children:g(a.paid_at)})]})]})})]})]})]})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("h2",{className:"text-xl font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Invoice not found"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"The invoice you're looking for doesn't exist."}),e.jsxs(i,{variant:"ghost",onClick:()=>r("/invoices"),children:[e.jsx(k,{className:"h-4 w-4 mr-2"}),"Back to Invoices"]})]})}export{J as InvoiceDetailView};
